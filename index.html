<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦¬å¤ªç¦éŸ³ç”Ÿå‘½è®€ç¶“</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, 'Segoe UI', 'PingFang TC', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); min-height: 100vh; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 20px; }
        .week-info { background: rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 25px; display: inline-block; }
        .card { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); margin-bottom: 20px; }
        .part-badge { display: inline-block; background: #667eea; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85em; margin-bottom: 15px; }
        .title { font-size: 1.5em; color: #333; margin-bottom: 5px; }
        .meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
        .progress-bar { height: 8px; background: #e0e0e0; border-radius: 4px; margin: 20px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 4px; }
        .scripture-box { background: #f8f9fa; border-left: 4px solid #667eea; padding: 15px 20px; margin: 20px 0; border-radius: 0 10px 10px 0; font-style: italic; }
        .content-text { line-height: 1.8; color: #333; font-size: 1.05em; white-space: pre-line; }
        .nav { display: flex; gap: 10px; margin-top: 30px; }
        .nav button { flex: 1; padding: 15px; border: none; border-radius: 12px; cursor: pointer; font-size: 1em; }
        .nav .primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .nav .secondary { background: #f0f0f0; color: #666; }
        .countdown { text-align: center; padding: 20px; background: linear-gradient(135deg, #f5f7fa, #c3cfe2); border-radius: 15px; margin-top: 20px; }
        .settings-btn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; border-radius: 50%; background: white; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.2); font-size: 1.5em; cursor: pointer; z-index: 100; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 20px; padding: 30px; max-width: 400px; width: 90%; max-height: 80vh; overflow-y: auto; }
        input, button { font-family: inherit; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“– é¦¬å¤ªç¦éŸ³ç”Ÿå‘½è®€ç¶“</h1>
            <div class="week-info" id="weekInfo"></div>
        </div>

        <div class="card">
            <div>
                <span class="part-badge" id="partBadge"></span>
                <h2 class="title" id="readingTitle"></h2>
                <div class="meta" id="readingMeta"></div>
            </div>

            <div class="progress-bar"><div class="progress-fill" id="progressBar" style="width: 0%"></div></div>
            <div style="text-align: center; color: #666; font-size: 0.85em; margin-bottom: 20px;" id="progressText"></div>

            <div class="scripture-box">
                <div id="scriptureText"></div>
                <div style="text-align: right; font-weight: bold; color: #667eea; margin-top: 10px; font-style: normal;" id="scriptureRef"></div>
            </div>

            <div class="content-text" id="contentText">è¼‰å…¥ä¸­...</div>

            <div class="nav">
                <button class="secondary" id="btnPrev">â† ä¸Šä¸€ç¯‡</button>
                <button class="primary" id="btnNext">ä¸‹ä¸€ç¯‡ â†’</button>
            </div>
        </div>

        <div class="countdown">
            <div style="color: #666; font-size: 0.9em;">â° è·é›¢ä¸‹æ¬¡æ›´æ–°é‚„æœ‰</div>
            <div style="font-size: 1.3em; color: #667eea; font-weight: bold;" id="countdownTime"></div>
        </div>
    </div>

    <button class="settings-btn" onclick="toggleSettings()">âš™ï¸</button>

    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">âš™ï¸ è¨­å®š</h3>
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; color: #666;">ğŸ“… é–‹å§‹æ—¥æœŸ</label>
                <input type="date" id="startDate" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px;">
            </div>
            <div id="readingList" style="max-height: 200px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 10px; padding: 10px; margin-bottom: 20px;"></div>
            
            <button onclick="toggleSettings()" style="width: 100%; padding: 15px; background: #667eea; color: white; border: none; border-radius: 10px; cursor: pointer;">é—œé–‰</button>
        </div>
    </div>

    <script>
        // ===== è®€ç¶“æ•¸æ“šï¼ˆå®Œæ•´30ç¯‡ï¼‰=====
        var READINGS = [
            {t:"ç¬¬1ç¯‡", s:"å¤ªä¸€1ï½17", v:"ç‹çš„å®¶ä¸–èˆ‡èº«åˆ†ï¼ˆä¸€ï¼‰", 
             c:"è–ç¶“ä¹ƒæ˜¯ç¥çš„èªªè©±ï¼Œç‰ æœ‰å…©éƒ¨åˆ†ã€‚åœ¨é ­ä¸€éƒ¨åˆ†ï¼Œå°±æ˜¯èˆŠç´„ï¼Œç¥è—‰è‘—çœ¾ç”³è¨€è€…èªªè©±ï¼›åœ¨ç¬¬äºŒéƒ¨åˆ†ï¼Œå°±æ˜¯æ–°ç´„ï¼Œç¥åœ¨å­è£èªªè©±ã€‚\n\nè–ç¶“æ˜¯ä¸€æœ¬ç”Ÿå‘½çš„æ›¸ã€‚é€™ç”Ÿå‘½ä¸€é»ä¸å·®å°±æ˜¯åŸºç£é€™ä½æ´»çš„äººç‰©ã€‚èˆŠç´„æç¹ªåŸºç£æ˜¯è¦ä¾†çš„ä¸€ä½ï¼›åˆ°äº†æ–°ç´„ï¼Œæ‰€è±«è¨€çš„é€™ä¸€ä½ä¾†äº†ã€‚å› æ­¤ï¼Œæ–°ç´„ä¹ƒæ˜¯èˆŠç´„çš„æ‡‰é©—ã€‚\n\næ–°ç´„é–‹é ­çš„è©±\nå¹¾ä¹æ‰€æœ‰çš„åŸºç£å¾’ï¼Œéƒ½å› æ–°ç´„çš„é ­ä¸€é å—åˆ°å›°æ“¾ã€‚é€™ä¸€é æœ‰å¾ˆå¤šæ‹—å£é›£å¿µçš„åå­—ã€‚ä½†é€™ä¸€é æ˜¯æ–°ç´„çš„é ­ä¸€éƒ¨åˆ†ã€‚ä»»ä½•ä¸€ç¨®è‘—ä½œï¼Œé–‹é ­çš„è©±å’ŒçµæŸçš„è©±éƒ½å¾ˆé‡è¦ã€‚\n\nåŸºç£ä¸€å¹…æ´»çš„åœ–ç•«\næˆ‘å€‘éœ€è¦èªªä¸€å¥è©±è«–åˆ°æ–°ç´„ã€‚æ–°ç´„æ˜¯ä¸€å€‹äººç‰©æ´»çš„åœ–ç•«ã€‚é€™ä½äººç‰©å¤ªå¥‡å¦™äº†ã€‚ç¥‚æ˜¯ç¥åˆæ˜¯äººã€‚ç¥‚æ˜¯ç¥èˆ‡äººçš„èª¿å’Œï¼Œå› ç‚ºåœ¨ç¥‚è£é¢ç¥æ€§èˆ‡äººæ€§èª¿åœ¨ä¸€èµ·ã€‚\n\nä¸€å€‹äººç‰©çš„å››æœ¬å‚³è¨˜\nè€¶ç©Œæ˜¯åŒ…ç¾…è¬æœ‰ã€å…·å‚™å¤šé¢çš„ã€‚ç¥‚æ˜¯èª°ï¼Œç¥‚æ˜¯ç”šéº¼ï¼Œæ²’æœ‰äººèƒ½è¿°ç›¡èªªç«­ã€‚æ­·å²ä¸Šæœ‰èª°æ˜¯æœ‰å››æœ¬ç¨ç‰¹çš„å‚³è¨˜ä¾†å¯«åˆ°ä»–çš„ï¼Ÿ\n\nåŸºç£çš„æ“´å¤§\nä½¿å¾’è¡Œå‚³æ˜¯é€™ä½å¥‡å¦™äººç‰©çš„æ“´å¤§ï¼Œæ˜¯åŒ…ç¾…è¬æœ‰ä¹‹åŸºç£çš„åˆ†æã€‚é€™ä½åŸºç£å·²ç¶“å¾ä¸€å€‹äººæ“´å¤§æˆåƒåƒè¬è¬çš„äººã€‚\n\nå››ç¦éŸ³çš„æ¬¡åº\nè®“æˆ‘å€‘å›åˆ°å››ç¦éŸ³ã€‚å¦‚æœæˆ‘ä¾†å®‰æ’å››ç¦éŸ³ï¼Œæˆ‘æœƒæŠŠç´„ç¿°ç¦éŸ³æ”¾åœ¨ç¬¬ä¸€ã€‚è¨±å¤šåŸºç£å¾’è®€è–ç¶“ï¼Œéƒ½å¾ç´„ç¿°ç¦éŸ³è®€èµ·ï¼Œç„¶å¾Œå†è®€è·¯åŠ ã€é¦¬å¯å’Œé¦¬å¤ªã€‚\n\nç¸½ç¶±\nè–ç¶“æ¯å·æ›¸éƒ½éœ€è¦ç¸½ç¶±ã€‚é¦¬å¤ªç¦éŸ³çš„ç¸½ç¶±æ˜¯ï¼šåŸºç£ä¹ƒæ˜¯è€¶å’Œè¯ç¥æˆäº†è‚‰é«”ä¾†ä½œå›ç‹æ•‘ä¸»ï¼Œè—‰è‘—ç¥‚çš„æ­»èˆ‡å¾©æ´»ï¼Œå°‡ç¥‚çš„ç™¾å§“å¾ç½ªè£æ•‘å‡ºä¾†ï¼Œå¥½å»ºç«‹è«¸å¤©çš„åœ‹ã€‚\n\nä¸­å¿ƒæ€æƒ³\næˆ‘å€‘ä¹Ÿéœ€è¦æ‰¾å‡ºè–ç¶“æ¯å·æ›¸çš„ä¸­å¿ƒæ€æƒ³ã€‚é¦¬å¤ªç¦éŸ³çš„ä¸­å¿ƒæ€æƒ³æ˜¯ï¼šåŸºç£ï¼Œå°±æ˜¯è€¶ç©Œå’Œä»¥é¦¬å…§åˆ©ï¼Œä¹ƒæ˜¯å›ç‹ã€æ–½æµ¸è€…ã€å…‰ã€æ•™å¸«ã€é†«æ²»è€…ã€èµ¦ç½ªè€…ã€æ–°éƒã€ç‰§äººã€æœ‹å‹ã€æ™ºæ…§ã€å®‰æ¯ã€æ›´å¤§çš„æ®¿ã€çœŸå¤§è¡›ã€å®‰æ¯æ—¥çš„ä¸»ã€æ›´å¤§çš„ç´„æ‹¿ã€æ›´å¤§çš„æ‰€ç¾…é–€ã€æ’’ç¨®è€…ã€ç¨®å­ã€é¤§é¤Šè€…ã€é¤…ã€æ¡Œå­ä¸‹çš„ç¢æ¸£ã€åŸºç£ã€æ´»ç¥çš„å…’å­ã€ç‚ºè‘—å¬æœƒçš„ç£çŸ³ã€å¬æœƒçš„å»ºé€ è€…ã€åœ‹åº¦çš„å‰µç«‹è€…ã€ä»Šæ—¥çš„æ‘©è¥¿ã€ä»Šæ—¥çš„ä»¥åˆ©äºã€æˆ¿è§’çš„é ­å¡ŠçŸ³é ­ã€ä¸»ã€å¾©æ´»çš„ä¸€ä½ã€å¸¶è‘—æ¬ŠæŸ„çš„ä¸€ä½ã€åœ¨å¾©æ´»è£èˆ‡ç¥‚å­æ°‘æ°¸é åŒåœ¨çš„ä¸€ä½ã€‚\n\nç‹çš„å®¶ç•¶èˆ‡èº«åˆ†\nå£¹ è­œç³»\nå››å·ç¦éŸ³æ›¸ä¸­ï¼Œåªæœ‰å…©å·æœ‰å®¶è­œï¼Œå°±æ˜¯é¦¬å¤ªç¦éŸ³å’Œè·¯åŠ ç¦éŸ³ã€‚é¦¬å¤ªå‘Šè¨´æˆ‘å€‘ï¼Œè€¶ç©Œæ˜¯ç‹å®¤çš„æ­£ç¢ºå¾Œè£”ï¼Œæ˜¯ç‹ä½åˆæ³•çš„ç¹¼æ‰¿äººã€‚\n\nä¸€ åŸºç£çš„å®¶è­œ\nç¾åœ¨æˆ‘å€‘ä¾†çœ‹é¦¬å¤ªç¦éŸ³è£è€¶ç©Œçš„è­œç³»ã€‚æˆ‘å€‘éœ€è¦é ˜æ‚Ÿè€¶ç©Œæ˜¯èª°ã€‚è€¶ç©Œæ˜¯èª°ï¼Ÿæˆ‘å€‘å¯èƒ½å›ç­”èªªï¼Œç¥‚æ˜¯ç¥çš„å…’å­ï¼Œä½†é€™è­œç³»æ²’æœ‰é€™æ¨£ä¸€å€‹è¾­ï¼Œåè€Œç¨±ç¥‚ç‚ºå¤§è¡›çš„å­å­«ï¼Œäºä¼¯æ‹‰ç½•çš„å­å­«ã€‚\n\nåŸºç£çš„å®¶è­œç”±ä¸‹åˆ—äº”ç­äººçµ„æˆï¼š\n\n1 åˆ—ç¥–\né€™äº›å…ˆç¥–æ˜¯å‰å¤§çš„äººç‰©ï¼Œå…±æœ‰åå››ä»£ã€‚\n\n2 å›ç‹\né€™äº›å›ç‹æ˜¯ç‹æ—ï¼Œä¹Ÿæœ‰åå››ä»£ã€‚\n\n3 å¹³æ°‘ï¼ˆè¢«æ“„èˆ‡æ­¸å›çš„äººï¼‰\nåŸºç£çš„å®¶è­œä¸åƒ…åŒ…æ‹¬é«˜éšå±¤çš„äººï¼Œä¹ŸåŒ…æ‹¬å¹³æ°‘ï¼Œä¸é¡¯è‘—çš„äººï¼Œå°±å¦‚é¦¬åˆ©äºå’Œç´„ç‘Ÿã€‚è²§çª®äººã€å°äººç‰©ä¹ŸåŒ…æ‹¬åœ¨åŸºç£çš„å®¶è­œè£ã€‚\n\n4 å››å€‹å†å«çš„å©¦å¥³\näºç•¶çš„å®¶è­œä¸è¨˜å©¦å¥³ã€‚ä½†åœ¨åŸºç£é€™å€‹ç°¡çŸ­çš„å®¶è­œè£å»é¡Œèµ·äº”å€‹å©¦å¥³ã€‚é€™äº”å€‹å©¦å¥³å¥½åƒæˆ‘çš„æ‰‹æŒ‡ä¸€æ¨£ï¼šå››å€‹å½¢æˆä¸€çµ„ï¼Œå¦ä¸€å€‹è‡ªæˆä¸€çµ„ã€‚\n\n5 ä¸€å€‹ç«¥å¥³\nåœ¨é€™å››å€‹å†å«çš„å¥³äººä¹‹å¤–ï¼Œæœ‰ä¸€å€‹ç«¥å¥³å¾ˆçªå‡ºï¼šè€¶ç©Œçš„æ¯è¦ªé¦¬åˆ©äºã€‚é¦¬åˆ©äºæ˜¯è‰¯å–„ã€ç´”æ½”ã€æ½”æ·¨çš„ã€‚é€™æŒ‡æ˜é€™å€‹å®¶è­œæ‰€é¡Œçš„äººï¼Œé™¤äº†è€¶ç©Œä»¥å¤–ï¼Œéƒ½æ˜¯ç½ªäººã€‚\n\näºŒ å¤§è¡›çš„å­å­«\nåŸºç£æ˜¯å¤§è¡›çš„å­å­«ã€‚å¤§è¡›çš„å…’å­æ‰€ç¾…é–€ï¼Œä¸»è¦åœ¨ä¸‰æ–¹é¢ä½œåŸºç£çš„è±«è¡¨ã€‚ç¬¬ä¸€ï¼Œä»–è±«è¡¨åŸºç£æ‰¿å—åœ‹åº¦ã€‚ç¬¬äºŒï¼Œæ‰€ç¾…é–€æœ‰æ™ºæ…§ï¼Œä¸¦èªªæ™ºæ…§çš„è©±ã€‚ç¬¬ä¸‰ï¼Œæ‰€ç¾…é–€å»ºé€ ç¥çš„æ®¿ã€‚\n\nä¸‰ äºä¼¯æ‹‰ç½•çš„å­å­«\nåŸºç£ä¹Ÿæ˜¯äºä¼¯æ‹‰ç½•çš„å­å­«ã€‚é€™å€‹å®¶è­œåªèªªåŸºç£æ˜¯å¤§è¡›çš„å­å­«ï¼Œäºä¼¯æ‹‰ç½•çš„å­å­«ï¼Œè€Œä¸èªªæ˜¯åˆ¥äººçš„å­å­«æˆ–å¾Œè£”ã€‚èˆŠç´„æ¸…æ¥šçš„è±«è¨€åŸºç£æ˜¯äºä¼¯æ‹‰ç½•çš„å­å­«ã€‚\n\näºä¼¯æ‹‰ç½•çš„å…’å­å¾—è‘—æ–°å©¦ï¼Œå¤§è¡›çš„å…’å­å»ºé€ æ®¿ã€‚å°åŸºç£è€Œè¨€ï¼Œæ–°å©¦å°±æ˜¯æ®¿ï¼Œæ®¿å°±æ˜¯æ–°å©¦ã€‚é€™å°±æ˜¯ç‚ºä½•é€™å®¶è­œèªªåŸºç£æ˜¯äºä¼¯æ‹‰ç½•çš„å­å­«ï¼Œå¤§è¡›çš„å­å­«ã€‚ç¥‚å°‡è‡ªå·±ç»ä¸Šä»¥è‡³æ–¼æ­»ï¼Œä¸¦ä¸”å¾©æ´»äº†ï¼šç¾ä»Šç¥åœ¨å»ºé€ ç¥çš„æ®¿ï¼Œå°‡ä¾†ç¥‚è¦å¾—è‘—æ–°å©¦ã€‚\n\nè€¶ç©Œæ˜¯å¤§è¡›çš„å­å­«ï¼Œå°çŒ¶å¤ªäººä¹ƒæ˜¯å¤§ç¦ã€‚ä½†ç¥‚æ˜¯äºä¼¯æ‹‰ç½•çš„å­å­«ï¼ŒæŠŠç¦å¸¶çµ¦æ‰€æœ‰çš„å¤–é‚¦äººã€‚å¦‚æœè€¶ç©Œåªæ˜¯å¤§è¡›çš„å­å­«ï¼Œç¥‚å°±èˆ‡æˆ‘å€‘æ¯«ä¸ç›¸å¹²ã€‚è®šç¾ä¸»ï¼Œç¥‚ä¹Ÿæ˜¯äºä¼¯æ‹‰ç½•çš„å­å­«ï¼è¬åœ‹éƒ½è¦å› äºä¼¯æ‹‰ç½•çš„å¾Œè£”å¾—ç¦ï¼Œé€™å¾Œè£”ä¹ƒæ˜¯åŸºç£ï¼›é€™ç¦å°±æ˜¯æœ‰åˆ†æ–¼ä¸‰ä¸€ç¥ã€‚é˜¿åˆ©è·¯äºï¼", st:"äºä¼¯æ‹‰ç½•ç”Ÿä»¥æ’’ï¼Œä»¥æ’’ç”Ÿé›…å„ï¼Œé›…å„ç”ŸçŒ¶å¤§å’Œä»–çš„å¼Ÿå…„å€‘ã€‚"},
            
            {t:"ç¬¬2ç¯‡", s:"å¤ªä¸€18ï½25", v:"ç‹çš„å®¶ä¸–èˆ‡èº«åˆ†ï¼ˆäºŒï¼‰", 
             c:"å›› äºä¼¯æ‹‰ç½•\né¦¬å¤ªç¦éŸ³çš„å®¶è­œé–‹å§‹æ–¼äºä¼¯æ‹‰ç½•ï¼Œä½†è·¯åŠ ç¦éŸ³çš„å®¶è­œå»å›æº¯åˆ°äºç•¶ã€‚é¦¬å¤ªæ²’æœ‰é¡Œåˆ°äºç•¶å’Œä»–çš„å¾Œè£”ï¼Œè·¯åŠ å»æœ‰ã€‚é€™å€‹å·®åˆ¥æœ‰ç”šéº¼æ„æ€ï¼Ÿè·¯åŠ ç¦éŸ³æ˜¯èªªåˆ°ç¥æ•‘æ©çš„æ›¸ï¼Œè€Œé¦¬å¤ªç¦éŸ³æ˜¯èªªåˆ°åœ‹åº¦çš„æ›¸ã€‚\n\nç¥çš„åœ‹ä¹ƒæ˜¯ç‚ºè‘—é€™å€‹æ—é¡ï¼Œç¥çš„åœ‹æ°¸é ä¸èƒ½åœ¨å¢®è½çš„æ—é¡èº«ä¸Šã€‚å› æ­¤ï¼Œè«–åˆ°è«¸å¤©ä¹‹åœ‹çš„é¦¬å¤ªç¦éŸ³ï¼Œå°±ä»¥äºä¼¯æ‹‰ç½•é–‹å§‹ã€‚\n\näºä¼¯æ‹‰ç½•ä¹ƒæ˜¯è’™ç¥å‘¼å¬å‡ºä¾†çš„ã€‚å¬æœƒåœ¨å¸Œè‡˜æ–‡ä¹ƒæ˜¯ekklesiaï¼Œè‰¾å…‹åˆ©è¥¿äºï¼Œæ„å¬å‡ºä¾†çš„äººã€‚å› æ­¤ï¼Œæˆ‘å€‘åœ¨å¬æœƒä¸­ä¹Ÿæ˜¯å¬å‡ºä¾†çš„äººã€‚\n\näº” å¤§è¡›\né¦¬å¤ªç¦éŸ³çš„å®¶è­œèªªåˆ°å¤§è¡›ã€‚å¤§è¡›ä¹‹å‰æ˜¯åˆ—ç¥–ï¼Œå¤§è¡›ä¹‹å¾Œæ˜¯å›ç‹ã€‚å¤§è¡›æ˜¯ç‹å®¤çš„å‰µå§‹äººã€‚", st:"å¥¹è¦ç”Ÿä¸€å€‹å…’å­ï¼Œä½ è¦çµ¦ç¥‚èµ·åå«è€¶ç©Œï¼Œå› ç¥‚è¦è¦ªè‡ªå°‡ç¥‚çš„ç™¾å§“å¾ä»–å€‘çš„ç½ªè£æ•‘å‡ºä¾†ã€‚"},
            
            {t:"ç¬¬3ç¯‡", s:"å¤ªäºŒ1ï½12", v:"æ˜Ÿè±¡å®¶ä¾†å°‹æ±‚ä¸¦æ•¬æ‹œå¬°å­©åŸºç£", 
             c:"é¦¬å¤ªäºŒç« èªªåˆ°æ˜Ÿè±¡å®¶å¾æ±æ–¹ä¾†æ•¬æ‹œå¬°å­©è€¶ç©Œã€‚ä»–å€‘çœ‹è¦‹ç¥‚çš„æ˜Ÿï¼Œå°±ä¾†åˆ°è€¶è·¯æ’’å†·ï¼Œå•èªªï¼Œé‚£ç”Ÿä¸‹ä¾†ä½œçŒ¶å¤ªäººä¹‹ç‹çš„åœ¨å“ªè£ï¼Ÿ\n\né€™é¡¯æ˜ä»–å€‘å°‹æ±‚åŸºç£ä¸æ˜¯æ†‘è‘—å‚³çµ±æˆ–æ•™è¨“ï¼Œè€Œæ˜¯æ†‘è‘—å±¬å¤©çš„ç•°è±¡ã€‚ä»–å€‘å¸¶ä¾†é»ƒé‡‘ã€ä¹³é¦™ã€æ²’è—¥ä½œç¦®ç‰©ï¼Œè¡¨å¾µåŸºç£çš„ç¥æ€§ã€ç¥‚çš„å¾©æ´»ã€ä»¥åŠç¥‚çš„å—æ­»ã€‚\n\né€™å•Ÿç¤ºå‡ºæˆ‘å€‘ä¾†æ•¬æ‹œåŸºç£ï¼Œå¿…é ˆå¸¶è‘—å°ç¥‚èº«ä½çš„èªè­˜å’Œç¶“æ­·ã€‚", st:"é‚£ç”Ÿä¸‹ä¾†ä½œçŒ¶å¤ªäººä¹‹ç‹çš„åœ¨å“ªè£ï¼Ÿæˆ‘å€‘åœ¨æ±æ–¹çœ‹è¦‹ç¥‚çš„æ˜Ÿï¼Œç‰¹ä¾†æ‹œç¥‚ã€‚"},
            
            {t:"ç¬¬4ç¯‡", s:"å¤ªäºŒ13ï½23", v:"å¬°å­©è€¶ç©Œè¢«é€ƒåˆ°åŸƒåŠä¸¦è¢«å¸¶å›", 
             c:"ç´„ç‘Ÿå¸¶è‘—é¦¬åˆ©äºå’Œè€¶ç©Œé€ƒå¾€åŸƒåŠï¼Œç‚ºè¦èº²é¿å¸Œå¾‹çš„æ®ºå®³ã€‚é€™æ‡‰é©—äº†ä¸»è—‰è‘—å…ˆçŸ¥æ‰€èªªçš„ï¼Œæˆ‘å¾åŸƒåŠå¬å‡ºæˆ‘çš„å…’å­ä¾†ã€‚\n\nå¾Œä¾†å¸Œå¾‹æ­»äº†ï¼Œç´„ç‘Ÿå¸¶è‘—å­©å­å’Œç¥‚æ¯è¦ªå›åˆ°ä»¥è‰²åˆ—åœ°ï¼Œä½†å› äºåŸºè€æ¥çºŒä»–çˆ¶è¦ªå¸Œå¾‹ä½œäº†çŒ¶å¤ªç‹ï¼Œå°±å®³æ€•å¾€é‚£è£å»ã€‚æ–¼æ˜¯å¾€åŠ åˆ©åˆ©å¢ƒå…§å»ï¼Œä½åœ¨æ‹¿æ’’å‹’ã€‚\n\né€™å°±æ‡‰é©—äº†çœ¾å…ˆçŸ¥æ‰€èªªçš„ï¼Œç¥‚è¦ç¨±ç‚ºæ‹¿æ’’å‹’äººã€‚", st:"ä½åœ¨é‚£è£ï¼Œç›´åˆ°å¸Œå¾‹æ­»äº†ã€‚é€™æ˜¯è¦æ‡‰é©—ä¸»è—‰è‘—å…ˆçŸ¥æ‰€èªªçš„ï¼Œæˆ‘å¾åŸƒåŠå¬å‡ºæˆ‘çš„å…’å­ä¾†ã€‚"},
            
            {t:"ç¬¬5ç¯‡", s:"å¤ªä¸‰1ï½12", v:"å…ˆé‹’çš„è·äº‹â”€é–‹è·¯ä¸¦å¼•é€²ç‹", 
             c:"ä¸‰ç« ä¸€ç¯€èªªåˆ°æ™‚å€™æ»¿è¶³äº†ï¼Œé‚£æ™‚å€™ï¼Œæ–½æµ¸è€…ç´„ç¿°å‡ºä¾†ï¼Œåœ¨çŒ¶å¤ªçš„æ› é‡å‚³é“ï¼Œèªªï¼Œä½ å€‘è¦æ‚”æ”¹ï¼Œå› ç‚ºè«¸å¤©çš„åœ‹å·²ç¶“è‡¨è¿‘äº†ã€‚\n\nç´„ç¿°æ˜¯ä¸»çš„å…ˆé‹’ï¼Œä»–çš„è·äº‹æ˜¯ç‚ºä¸»é–‹è·¯ï¼Œå°‡äººå¼•é€²åœ‹åº¦ã€‚ä»–ç©¿é§±é§æ¯›çš„è¡£æœï¼Œè…°æŸçš®å¸¶ï¼Œåƒè—èŸ²é‡èœœï¼Œéè‘—å¦èªå·±çš„ç”Ÿæ´»ã€‚\n\nä»–å°æ³•åˆ©è³½äººå’Œæ’’éƒ½è©²äººèªªï¼Œæ¯’è›‡ä¹‹ç¨®ï¼Œèª°æŒ‡ç¤ºä½ å€‘é€ƒé¿è¦ä¾†çš„å¿¿æ€’ï¼Ÿä½ å€‘è¦çµå‡ºæœå­ï¼Œèˆ‡æ‚”æ”¹ç›¸ç¨±ã€‚", st:"ä½ å€‘è¦æ‚”æ”¹ï¼Œå› ç‚ºè«¸å¤©çš„åœ‹å·²ç¶“è‡¨è¿‘äº†ã€‚"}
        ];

        // ===== è¨­å®š =====
        var settings = { startDate: '2025-01-06' };

        function loadSettings() {
            try {
                var saved = localStorage.getItem('matthewSettings');
                if (saved) settings = JSON.parse(saved);
                document.getElementById('startDate').value = settings.startDate;
            } catch(e) {}
        }

        function saveSettings() {
            try {
                localStorage.setItem('matthewSettings', JSON.stringify(settings));
            } catch(e) {}
        }

        // ===== è¨ˆç®— =====
        function getCurrentWeek() {
            var start = new Date(settings.startDate);
            var now = new Date();
            var days = Math.floor((now - start) / (1000 * 60 * 60 * 24));
            return Math.max(1, Math.floor(days / 7) + 1);
        }

        function getCurrentReading() {
            var week = getCurrentWeek();
            var idx = Math.floor((week - 1) / 2);
            var part = ((week - 1) % 2 === 0) ? 1 : 2;
            return { idx: Math.min(idx, READINGS.length - 1), part: part, week: week };
        }

        function splitContent(text) {
            var paras = text.split('\n\n').filter(function(p) { return p.trim(); });
            var mid = Math.ceil(paras.length / 2);
            return { p1: paras.slice(0, mid).join('\n\n'), p2: paras.slice(mid).join('\n\n') };
        }

        // ===== æ¸²æŸ“ =====
        function render() {
            try {
                var cur = getCurrentReading();
                var r = READINGS[cur.idx];
                
                if (!r) {
                    document.getElementById('contentText').textContent = 'æ‰€æœ‰è®€ç¶“å·²å®Œæˆï¼';
                    return;
                }

                document.getElementById('weekInfo').textContent = 'ç¬¬ ' + cur.week + ' é€±';
                document.getElementById('readingTitle').textContent = r.t;
                document.getElementById('readingMeta').textContent = r.s + ' | ' + r.v;
                document.getElementById('partBadge').textContent = cur.part === 1 ? 'ç¬¬ä¸€éƒ¨åˆ†' : 'ç¬¬äºŒéƒ¨åˆ†';

                var parts = splitContent(r.c);
                document.getElementById('contentText').textContent = cur.part === 1 ? parts.p1 : parts.p2;
                
                document.getElementById('scriptureText').textContent = r.st;
                document.getElementById('scriptureRef').textContent = 'â€” ' + r.s;

                var total = READINGS.length * 2;
                var completed = cur.week - 1;
                var pct = (completed / total) * 100;
                document.getElementById('progressBar').style.width = pct + '%';
                document.getElementById('progressText').textContent = completed + '/' + total + ' (' + Math.round(pct) + '%)';

                document.getElementById('btnPrev').disabled = cur.week <= 1;
                document.getElementById('btnNext').disabled = cur.idx >= READINGS.length - 1 && cur.part === 2;

            } catch(e) { console.error(e); }
        }

        function updateCountdown() {
            try {
                var now = new Date();
                var next = new Date(now);
                next.setDate(now.getDate() + (1 + 7 - now.getDay()) % 7);
                next.setHours(0, 0, 0, 0);
                if (now.getDay() === 1) next.setDate(next.getDate() + 7);
                
                var diff = next - now;
                var d = Math.floor(diff / 86400000);
                var h = Math.floor((diff % 86400000) / 3600000);
                var m = Math.floor((diff % 3600000) / 60000);
                document.getElementById('countdownTime').textContent = d + 'å¤© ' + h + 'å°æ™‚ ' + m + 'åˆ†é˜';
            } catch(e) {}
        }

        // ===== å°èˆª =====
        document.getElementById('btnPrev').onclick = function() {
            var cur = getCurrentReading();
            if (cur.week > 1) {
                var start = new Date(settings.startDate);
                var prev = new Date(start);
                prev.setDate(start.getDate() + (cur.week - 2) * 7);
                settings.startDate = prev.toISOString().split('T')[0];
                render();
            }
        };

        document.getElementById('btnNext').onclick = function() {
            var cur = getCurrentReading();
            var start = new Date(settings.startDate);
            var next = new Date(start);
            next.setDate(start.getDate() + cur.week * 7);
            settings.startDate = next.toISOString().split('T')[0];
            render();
        };

        // ===== è¨­å®š =====
        function toggleSettings() {
            document.getElementById('settingsModal').classList.toggle('active');
            if (document.getElementById('settingsModal').classList.contains('active')) {
                updateReadingList();
            }
        }

        document.getElementById('startDate').onchange = function() {
            settings.startDate = this.value;
            saveSettings();
            render();
        };

        function updateReadingList() {
            var cur = getCurrentReading();
            var html = '';
            for (var i = 0; i < READINGS.length; i++) {
                var w1 = i * 2 + 1, w2 = i * 2 + 2;
                var cls = (i === cur.idx ? 'background: #e3f2fd; border-left: 3px solid #667eea;' : '') +
                          (w2 < cur.week ? 'color: #999;' : '');
                html += '<div style="padding: 10px; border-bottom: 1px solid #f0f0f0; cursor: pointer; ' + cls + '" onclick="jumpToWeek(' + w1 + ')">' +
                        READINGS[i].t + ' - ç¬¬' + w1 + '-' + w2 + 'é€±' + (w2 < cur.week ? ' âœ“' : '') +
                        '</div>';
            }
            document.getElementById('readingList').innerHTML = html;
        }

        function jumpToWeek(week) {
            var start = new Date(settings.startDate);
            var target = new Date(start);
            target.setDate(start.getDate() + (week - 1) * 7);
            settings.startDate = target.toISOString().split('T')[0];
            document.getElementById('startDate').value = settings.startDate;
            saveSettings();
            render();
            toggleSettings();
        }

        // ===== åˆå§‹åŒ– =====
        window.onload = function() {
            loadSettings();
            render();
            updateCountdown();
            setInterval(updateCountdown, 60000);
        };
    </script>
</body>
</html>
